'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var index_module$1 = require('../../react-slot/dist/index.module.js');
var index_module = require('../../react-compose-refs/dist/index.module.js');
var React = require('react');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var React__default = /*#__PURE__*/_interopDefaultLegacy(React);

function createCollection(){const n=/*#__PURE__*/React__default['default'].createContext({}),o=e=>{const{children:r}=e,o=React__default['default'].useRef(null),c=React__default['default'].useRef(new Map).current;return React__default['default'].createElement(n.Provider,{value:React__default['default'].useMemo((()=>({itemMap:c,collectionRef:o})),[c])},r)},c=/*#__PURE__*/React__default['default'].forwardRef(((o,c)=>{const{children:f}=o,l=React__default['default'].useContext(n),u=index_module.useComposedRefs(c,l.collectionRef);return React__default['default'].createElement(index_module$1.Slot,{ref:u},f)})),f="data-radix-collection-item",l=/*#__PURE__*/React__default['default'].forwardRef(((o,c)=>{const{children:l,...u}=o,i=React__default['default'].useRef(null),a=index_module.useComposedRefs(c,i),s=React__default['default'].useContext(n);return React__default['default'].useEffect((()=>(s.itemMap.set(i,{ref:i,...u}),()=>{s.itemMap.delete(i);}))),/*#__PURE__*/React__default['default'].createElement(index_module$1.Slot,{[f]:"",ref:a},l)}));return [o,c,l,function(){const e=React__default['default'].useContext(n);return {getItems(){const r=Array.from(e.collectionRef.current.querySelectorAll(`[${f}]`));return Array.from(e.itemMap.values()).sort(((e,t)=>r.indexOf(e.ref.current)-r.indexOf(t.ref.current)))}}}]}

exports.createCollection = createCollection;
