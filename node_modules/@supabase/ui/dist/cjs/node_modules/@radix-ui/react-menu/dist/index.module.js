'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var index_module$4 = require('../../react-id/dist/index.module.js');
var index_module$8 = require('../../react-focus-guards/dist/index.module.js');
var index_module$1 = require('../../react-use-callback-ref/dist/index.module.js');
var index_module$2 = require('../../react-use-direction/dist/index.module.js');
var index_module$b = require('../../react-roving-focus/dist/index.module.js');
var index_module$e = require('../../react-portal/dist/index.module.js');
var index_module$3 = require('../../react-popper/dist/index.module.js');
var index_module$c = require('../../react-primitive/dist/index.module.js');
var index_module$5 = require('../../react-presence/dist/index.module.js');
var index_module$9 = require('../../react-focus-scope/dist/index.module.js');
var index_module$a = require('../../react-dismissable-layer/dist/index.module.js');
var index_module = require('../../react-context/dist/index.module.js');
var index_module$6 = require('../../react-compose-refs/dist/index.module.js');
var index_module$d = require('../../react-collection/dist/index.module.js');
var index_module$7 = require('../../primitive/dist/index.module.js');
var index = require('../../../aria-hidden/dist/es2015/index.js');
var Combination = require('../../../react-remove-scroll/dist/es2015/Combination.js');
var React = require('react');
var _extends = require('../../../@babel/runtime/helpers/esm/extends.js');

function _interopNamespace(e) {
	if (e && e.__esModule) return e;
	var n = Object.create(null);
	if (e) {
		Object.keys(e).forEach(function (k) {
			if (k !== 'default') {
				var d = Object.getOwnPropertyDescriptor(e, k);
				Object.defineProperty(n, k, d.get ? d : {
					enumerable: true,
					get: function () {
						return e[k];
					}
				});
			}
		});
	}
	n['default'] = e;
	return Object.freeze(n);
}

var React__namespace = /*#__PURE__*/_interopNamespace(React);

const x=["Enter"," "],b=["ArrowUp","PageDown","End"],R=["ArrowDown","PageUp","Home",...b],M={ltr:[...x,"ArrowRight"],rtl:[...x,"ArrowLeft"]},y={ltr:["ArrowLeft"],rtl:["ArrowRight"]},[I,P]=index_module.createContext("Menu");const Menu=e=>{const{open:t=!1,children:o,onOpenChange:u,modal:a=!0}=e,[i,l]=React__namespace.useState(null),s=React__namespace.useRef(!1),d=index_module$1.useCallbackRef(u),f=index_module$2.useDirection(i,e.dir);return React__namespace.useEffect((()=>{const e=()=>s.current=!0,t=()=>s.current=!1;return document.addEventListener("keydown",e,{capture:!0}),document.addEventListener("pointerdown",t,{capture:!0}),document.addEventListener("pointermove",t,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0});}}),[]),/*#__PURE__*/React__namespace.createElement(index_module$3.Root,null,/*#__PURE__*/React__namespace.createElement(I,{isSubmenu:!1,isUsingKeyboardRef:s,dir:f,open:t,onOpenChange:d,content:i,onContentChange:l,onRootClose:React__namespace.useCallback((()=>d(!1)),[d]),modal:a},o))};const MenuSub=t=>{const{children:r,open:o=!1,onOpenChange:u}=t,a=P("MenuSub"),[i,l]=React__namespace.useState(null),[s,d]=React__namespace.useState(null),f=index_module$1.useCallbackRef(u);return React__namespace.useEffect((()=>(!1===a.open&&f(!1),()=>f(!1))),[a.open,f]),/*#__PURE__*/React__namespace.createElement(index_module$3.Root,null,/*#__PURE__*/React__namespace.createElement(I,{isSubmenu:!0,isUsingKeyboardRef:a.isUsingKeyboardRef,dir:a.dir,open:o,onOpenChange:f,content:s,onContentChange:d,onRootClose:a.onRootClose,contentId:index_module$4.useId(),trigger:i,onTriggerChange:l,triggerId:index_module$4.useId(),modal:!1},r))};const MenuAnchor=/*#__PURE__*/React__namespace.forwardRef(((e,t)=>/*#__PURE__*/React__namespace.createElement(index_module$3.Anchor,_extends['default']({},e,{ref:t}))));const[k,D,S,O]=index_module$d.createCollection(),[T,L]=index_module.createContext("MenuContent");const MenuContent=/*#__PURE__*/React__namespace.forwardRef(((e,t)=>{const{forceMount:n,...r}=e,o=P("MenuContent");return React__namespace.createElement(k,null,/*#__PURE__*/React__namespace.createElement(index_module$5.Presence,{present:n||o.open},/*#__PURE__*/React__namespace.createElement(D,null,o.isSubmenu?/*#__PURE__*/React__namespace.createElement(G,_extends['default']({},r,{ref:t})):/*#__PURE__*/React__namespace.createElement(A,_extends['default']({},r,{ref:t})))))}));const A=/*#__PURE__*/React__namespace.forwardRef(((e,t)=>P("MenuContent").modal?/*#__PURE__*/React__namespace.createElement(F,_extends['default']({},e,{ref:t})):/*#__PURE__*/React__namespace.createElement(K,_extends['default']({},e,{ref:t})))),F=/*#__PURE__*/React__namespace.forwardRef(((e,t)=>{const n=P("MenuContent"),r=React__namespace.useRef(null),o=index_module$6.useComposedRefs(t,r);return React__namespace.useEffect((()=>{const e=r.current;if(e)return index.hideOthers(e)}),[]),/*#__PURE__*/React__namespace.createElement(U,_extends['default']({},e,{ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:index_module$7.composeEventHandlers(e.onFocusOutside,(e=>e.preventDefault()),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)}))})),K=/*#__PURE__*/React__namespace.forwardRef(((e,t)=>{const n=P("MenuContent");return React__namespace.createElement(U,_extends['default']({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)}))})),G=/*#__PURE__*/React__namespace.forwardRef(((e,t)=>{const n=P("MenuContent"),r=React__namespace.useRef(null),o=index_module$6.useComposedRefs(t,r);return n.isSubmenu?/*#__PURE__*/React__namespace.createElement(U,_extends['default']({id:n.contentId,"aria-labelledby":n.triggerId},e,{ref:o,align:"start",side:"rtl"===n.dir?"left":"right",portalled:!0,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{var t;n.isUsingKeyboardRef.current&&(null===(t=r.current)||void 0===t||t.focus()),e.preventDefault();},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:index_module$7.composeEventHandlers(e.onFocusOutside,(e=>{e.target!==n.trigger&&n.onOpenChange(!1);})),onEscapeKeyDown:index_module$7.composeEventHandlers(e.onEscapeKeyDown,n.onRootClose),onKeyDown:index_module$7.composeEventHandlers(e.onKeyDown,(e=>{const t=e.currentTarget.contains(e.target),r=y[n.dir].includes(e.key);var o;t&&r&&(n.onOpenChange(!1),null===(o=n.trigger)||void 0===o||o.focus());}))})):null})),U=/*#__PURE__*/React__namespace.forwardRef(((e,n)=>{const{loop:r=!1,trapFocus:u,onOpenAutoFocus:i,onCloseAutoFocus:l,disableOutsidePointerEvents:f,onEscapeKeyDown:p,onPointerDownOutside:v,onFocusOutside:h,onInteractOutside:x,onDismiss:M,disableOutsideScroll:y,portalled:I,...k}=e,D=P("MenuContent"),{getItems:S}=O(),[L,A]=React__namespace.useState(null),F=React__namespace.useRef(null),K=index_module$6.useComposedRefs(n,F,D.onContentChange),G=React__namespace.useRef(0),U=React__namespace.useRef(""),V=React__namespace.useRef(0),X=React__namespace.useRef(null),B=React__namespace.useRef("right"),z=React__namespace.useRef(0),W=I?index_module$e.Portal:React__namespace.Fragment,j=y?Combination['default']:React__namespace.Fragment,q=e=>{var t,n;const r=U.current+e,o=S().filter((e=>!e.disabled)),u=document.activeElement,a=null===(t=o.find((e=>e.ref.current===u)))||void 0===t?void 0:t.textValue,c=function(e,t,n){const r=t.length>1&&Array.from(t).every((e=>e===t[0]))?t[0]:t,o=n?e.indexOf(n):-1;let u=(a=e,c=Math.max(o,0),a.map(((e,t)=>a[(c+t)%a.length])));var a,c;1===r.length&&(u=u.filter((e=>e!==n)));const i=u.find((e=>e.toLowerCase().startsWith(r.toLowerCase())));return i!==n?i:void 0}(o.map((e=>e.textValue)),r,a),i=null===(n=o.find((e=>e.textValue===c)))||void 0===n?void 0:n.ref.current;!function e(t){U.current=t,window.clearTimeout(G.current),""!==t&&(G.current=window.setTimeout((()=>e("")),1e3));}(r),i&&setTimeout((()=>i.focus()));};React__namespace.useEffect((()=>()=>window.clearTimeout(G.current)),[]),index_module$8.useFocusGuards();const J=React__namespace.useCallback((e=>{var t,n;return B.current===(null===(t=X.current)||void 0===t?void 0:t.side)&&function(e,t){if(!t)return !1;return function(e,t){const{x:n,y:r}=e;let o=!1;for(let e=0,u=t.length-1;e<t.length;u=e++){const a=t[e].x,c=t[e].y,i=t[u].x,l=t[u].y;c>r!=l>r&&n<(i-a)*(r-c)/(l-c)+a&&(o=!o);}return o}({x:e.clientX,y:e.clientY},t)}(e,null===(n=X.current)||void 0===n?void 0:n.area)}),[]);return React__namespace.createElement(W,null,/*#__PURE__*/React__namespace.createElement(j,null,/*#__PURE__*/React__namespace.createElement(T,{searchRef:U,onItemEnter:React__namespace.useCallback((e=>{J(e)&&e.preventDefault();}),[J]),onItemLeave:React__namespace.useCallback((e=>{var t;J(e)||(null===(t=F.current)||void 0===t||t.focus(),A(null));}),[J]),onTriggerLeave:React__namespace.useCallback((e=>{J(e)&&e.preventDefault();}),[J]),pointerGraceTimerRef:V,onPointerGraceIntentChange:React__namespace.useCallback((e=>{X.current=e;}),[])},/*#__PURE__*/React__namespace.createElement(index_module$9.FocusScope,{asChild:!0,trapped:u,onMountAutoFocus:index_module$7.composeEventHandlers(i,(e=>{var t;e.preventDefault(),null===(t=F.current)||void 0===t||t.focus();})),onUnmountAutoFocus:l},/*#__PURE__*/React__namespace.createElement(index_module$a.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:f,onEscapeKeyDown:p,onPointerDownOutside:v,onFocusOutside:h,onInteractOutside:x,onDismiss:M},/*#__PURE__*/React__namespace.createElement(index_module$b.RovingFocusGroup,{asChild:!0,dir:D.dir,orientation:"vertical",loop:r,currentTabStopId:L,onCurrentTabStopIdChange:A,onEntryFocus:e=>{D.isUsingKeyboardRef.current||e.preventDefault();}},/*#__PURE__*/React__namespace.createElement(index_module$3.Content,_extends['default']({role:"menu",dir:D.dir,"data-state":Y(D.open)},k,{ref:K,style:{outline:"none",...k.style},onKeyDown:index_module$7.composeEventHandlers(k.onKeyDown,(e=>{const t=e.target,n=e.currentTarget.contains(t),r=e.ctrlKey||e.altKey||e.metaKey;n&&!r&&1===e.key.length&&q(e.key),"Tab"===e.key&&e.preventDefault();const o=F.current;if(e.target!==o)return;if(!R.includes(e.key))return;e.preventDefault();const u=S().filter((e=>!e.disabled)).map((e=>e.ref.current));b.includes(e.key)&&u.reverse(),function(e){const t=document.activeElement;for(const n of e){if(n===t)return;if(n.focus(),document.activeElement!==t)return}}(u);})),onBlur:index_module$7.composeEventHandlers(e.onBlur,(e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(G.current),U.current="");})),onPointerMove:index_module$7.composeEventHandlers(e.onPointerMove,H((e=>{const t=e.target,n=z.current!==e.clientX;if(e.currentTarget.contains(t)&&n){const t=e.clientX>z.current?"right":"left";B.current=t,z.current=e.clientX;}})))}))))))))}));const MenuGroup=/*#__PURE__*/React__namespace.forwardRef(((e,t)=>/*#__PURE__*/React__namespace.createElement(index_module$c.Primitive.div,_extends['default']({role:"group"},e,{ref:t}))));const MenuLabel=/*#__PURE__*/React__namespace.forwardRef(((e,t)=>/*#__PURE__*/React__namespace.createElement(index_module$c.Primitive.div,_extends['default']({},e,{ref:t}))));const MenuItem=/*#__PURE__*/React__namespace.forwardRef(((e,t)=>{const{disabled:n=!1,onSelect:r,...o}=e,u=React__namespace.useRef(null),a=P("MenuItem"),c=L("MenuItem"),i=index_module$6.useComposedRefs(t,u),l=React__namespace.useRef(!1);return React__namespace.createElement(V,_extends['default']({},o,{ref:i,disabled:n,onClick:index_module$7.composeEventHandlers(e.onClick,(()=>{const e=u.current;if(!n&&e){const t=new Event("menu.itemSelect",{bubbles:!0,cancelable:!0});e.addEventListener("menu.itemSelect",(e=>null==r?void 0:r(e)),{once:!0}),e.dispatchEvent(t),t.defaultPrevented?l.current=!1:a.onRootClose();}})),onPointerDown:t=>{var n;null===(n=e.onPointerDown)||void 0===n||n.call(e,t),l.current=!0;},onPointerUp:index_module$7.composeEventHandlers(e.onPointerUp,(e=>{var t;l.current||null===(t=e.currentTarget)||void 0===t||t.click();})),onKeyDown:index_module$7.composeEventHandlers(e.onKeyDown,(e=>{const t=""!==c.searchRef.current;n||t&&" "===e.key||x.includes(e.key)&&(e.currentTarget.click(),e.preventDefault());}))}))}));const MenuSubTrigger=/*#__PURE__*/React__namespace.forwardRef(((e,t)=>{const n=P("MenuSubTrigger"),r=L("MenuSubTrigger"),o=React__namespace.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:a}=r,c=React__namespace.useCallback((()=>{o.current&&window.clearTimeout(o.current),o.current=null;}),[]);return React__namespace.useEffect((()=>c),[c]),React__namespace.useEffect((()=>{const e=u.current;return ()=>{window.clearTimeout(e),a(null);}}),[u,a]),n.isSubmenu?/*#__PURE__*/React__namespace.createElement(MenuAnchor,{asChild:!0},/*#__PURE__*/React__namespace.createElement(V,_extends['default']({id:n.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":Y(n.open)},e,{ref:index_module$6.composeRefs(t,n.onTriggerChange),onClick:t=>{var r;null===(r=e.onClick)||void 0===r||r.call(e,t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),n.open||n.onOpenChange(!0));},onPointerMove:index_module$7.composeEventHandlers(e.onPointerMove,H((t=>{r.onItemEnter(t),t.defaultPrevented||e.disabled||n.open||o.current||(r.onPointerGraceIntentChange(null),o.current=window.setTimeout((()=>{n.onOpenChange(!0),c();}),100));}))),onPointerLeave:index_module$7.composeEventHandlers(e.onPointerLeave,H((e=>{var t;c();const o=null===(t=n.content)||void 0===t?void 0:t.getBoundingClientRect();if(o){var a;const t=null===(a=n.content)||void 0===a?void 0:a.dataset.side,c="right"===t,i=c?-5:5,l=o[c?"left":"right"],s=o[c?"right":"left"];r.onPointerGraceIntentChange({area:[{x:e.clientX+i,y:e.clientY},{x:l,y:o.top},{x:s,y:o.top},{x:s,y:o.bottom},{x:l,y:o.bottom}],side:t}),window.clearTimeout(u.current),u.current=window.setTimeout((()=>r.onPointerGraceIntentChange(null)),300);}else {if(r.onTriggerLeave(e),e.defaultPrevented)return;r.onPointerGraceIntentChange(null);}}))),onKeyDown:index_module$7.composeEventHandlers(e.onKeyDown,(t=>{const o=""!==r.searchRef.current;var u;e.disabled||o&&" "===t.key||M[n.dir].includes(t.key)&&(n.onOpenChange(!0),null===(u=n.content)||void 0===u||u.focus());}))}))):null}));const V=/*#__PURE__*/React__namespace.forwardRef(((e,t)=>{const{disabled:n=!1,textValue:r,...o}=e,a=React__namespace.useRef(null),c=index_module$6.useComposedRefs(t,a),l=L("MenuItem"),[s,d]=React__namespace.useState("");return React__namespace.useEffect((()=>{const e=a.current;var t;e&&d((null!==(t=e.textContent)&&void 0!==t?t:"").trim());}),[o.children]),/*#__PURE__*/React__namespace.createElement(S,{disabled:n,textValue:null!=r?r:s},/*#__PURE__*/React__namespace.createElement(index_module$b.RovingFocusItem,{asChild:!0,focusable:!n},/*#__PURE__*/React__namespace.createElement(index_module$c.Primitive.div,_extends['default']({role:"menuitem","aria-disabled":n||void 0,"data-disabled":n?"":void 0},o,{ref:c,onPointerMove:index_module$7.composeEventHandlers(e.onPointerMove,H((e=>{if(n)l.onItemLeave(e);else if(l.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus();}}))),onPointerLeave:index_module$7.composeEventHandlers(e.onPointerLeave,H((e=>l.onItemLeave(e))))}))))}));const MenuCheckboxItem=/*#__PURE__*/React__namespace.forwardRef(((e,t)=>{const{checked:n=!1,onCheckedChange:r,...o}=e;return React__namespace.createElement(B.Provider,{value:n},/*#__PURE__*/React__namespace.createElement(MenuItem,_extends['default']({role:"menuitemcheckbox","aria-checked":n},o,{ref:t,"data-state":z(n),onSelect:index_module$7.composeEventHandlers(o.onSelect,(()=>null==r?void 0:r(!n)),{checkForDefaultPrevented:!1})})))}));const X=/*#__PURE__*/React__namespace.createContext({});const MenuRadioGroup=/*#__PURE__*/React__namespace.forwardRef(((e,t)=>{const{value:r,onValueChange:o,...u}=e,a=index_module$1.useCallbackRef(o),c=React__namespace.useMemo((()=>({value:r,onValueChange:a})),[r,a]);return React__namespace.createElement(X.Provider,{value:c},/*#__PURE__*/React__namespace.createElement(MenuGroup,_extends['default']({},u,{ref:t})))}));const MenuRadioItem=/*#__PURE__*/React__namespace.forwardRef(((e,t)=>{const{value:n,...r}=e,o=React__namespace.useContext(X),u=n===o.value;return React__namespace.createElement(B.Provider,{value:u},/*#__PURE__*/React__namespace.createElement(MenuItem,_extends['default']({role:"menuitemradio","aria-checked":u},r,{ref:t,"data-state":z(u),onSelect:index_module$7.composeEventHandlers(r.onSelect,(()=>{var e;return null===(e=o.onValueChange)||void 0===e?void 0:e.call(o,n)}),{checkForDefaultPrevented:!1})})))}));const B=/*#__PURE__*/React__namespace.createContext(!1);const MenuItemIndicator=/*#__PURE__*/React__namespace.forwardRef(((e,t)=>{const{forceMount:n,...r}=e,o=React__namespace.useContext(B);return React__namespace.createElement(index_module$5.Presence,{present:n||o},/*#__PURE__*/React__namespace.createElement(index_module$c.Primitive.span,_extends['default']({},r,{ref:t,"data-state":z(o)})))}));const MenuArrow=/*#__PURE__*/React__namespace.forwardRef(((e,t)=>/*#__PURE__*/React__namespace.createElement(index_module$3.Arrow,_extends['default']({},e,{ref:t}))));function Y(e){return e?"open":"closed"}function z(e){return e?"checked":"unchecked"}function H(e){return t=>"mouse"===t.pointerType?e(t):void 0}const Root=Menu;const Sub=MenuSub;const Anchor=MenuAnchor;const SubTrigger=MenuSubTrigger;const Content=MenuContent;const Label=MenuLabel;const Item=MenuItem;const CheckboxItem=MenuCheckboxItem;const RadioGroup=MenuRadioGroup;const RadioItem=MenuRadioItem;const ItemIndicator=MenuItemIndicator;const Arrow=MenuArrow;

exports.Anchor = Anchor;
exports.Arrow = Arrow;
exports.CheckboxItem = CheckboxItem;
exports.Content = Content;
exports.Item = Item;
exports.ItemIndicator = ItemIndicator;
exports.Label = Label;
exports.Menu = Menu;
exports.MenuAnchor = MenuAnchor;
exports.MenuArrow = MenuArrow;
exports.MenuCheckboxItem = MenuCheckboxItem;
exports.MenuContent = MenuContent;
exports.MenuGroup = MenuGroup;
exports.MenuItem = MenuItem;
exports.MenuItemIndicator = MenuItemIndicator;
exports.MenuLabel = MenuLabel;
exports.MenuRadioGroup = MenuRadioGroup;
exports.MenuRadioItem = MenuRadioItem;
exports.MenuSub = MenuSub;
exports.MenuSubTrigger = MenuSubTrigger;
exports.RadioGroup = RadioGroup;
exports.RadioItem = RadioItem;
exports.Root = Root;
exports.Sub = Sub;
exports.SubTrigger = SubTrigger;
