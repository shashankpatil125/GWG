import { useId } from '../../react-id/dist/index.module.js';
import { Sub, Root as Root$1, Anchor, Content as Content$1, SubTrigger, Arrow as Arrow$1, Label as Label$1, Item as Item$1, CheckboxItem as CheckboxItem$1, RadioGroup as RadioGroup$1, RadioItem as RadioItem$1, ItemIndicator as ItemIndicator$1 } from '../../react-menu/dist/index.module.js';
import { Primitive } from '../../react-primitive/dist/index.module.js';
import { useControllableState } from '../../react-use-controllable-state/dist/index.module.js';
import { createContext } from '../../react-context/dist/index.module.js';
import { composeRefs } from '../../react-compose-refs/dist/index.module.js';
import { composeEventHandlers } from '../../primitive/dist/index.module.js';
import * as React from 'react';
import _extends from '../../../@babel/runtime/helpers/esm/extends.js';

const[u,i]=createContext("DropdownMenu");const DropdownMenu=e=>{const{children:r,open:t,defaultOpen:a,onOpenChange:p,dir:c,modal:i=!0}=e,s=React.useContext(m),[f=!1,w]=useControllableState({prop:t,defaultProp:a,onChange:p}),g=React.useCallback((()=>w((e=>!e))),[w]);return s?/*#__PURE__*/React.createElement(u,{isRootMenu:!1,open:f,onOpenChange:w,onOpenToggle:g},/*#__PURE__*/React.createElement(Sub,{open:f,onOpenChange:w},r)):/*#__PURE__*/React.createElement(l,{dir:c,open:f,onOpenChange:w,onOpenToggle:g,modal:i},r)};const l=r=>{const{children:n,dir:t,open:a,onOpenChange:p,onOpenToggle:c,modal:i=!0}=r,l=React.useRef(null);return React.createElement(u,{isRootMenu:!0,triggerId:useId(),triggerRef:l,contentId:useId(),open:a,onOpenChange:p,onOpenToggle:c,modal:i},/*#__PURE__*/React.createElement(Root$1,{open:a,onOpenChange:p,dir:t,modal:i},n))};const DropdownMenuTrigger=/*#__PURE__*/React.forwardRef(((e,n)=>{const t=i("DropdownMenuTrigger");return t.isRootMenu?/*#__PURE__*/React.createElement(Anchor,{asChild:!0},/*#__PURE__*/React.createElement(Primitive.button,_extends({type:"button",id:t.triggerId,"aria-haspopup":"menu","aria-expanded":!!t.open||void 0,"aria-controls":t.open?t.contentId:void 0,"data-state":t.open?"open":"closed"},e,{ref:composeRefs(n,t.triggerRef),onPointerDown:composeEventHandlers(e.onPointerDown,(e=>{0===e.button&&!1===e.ctrlKey&&(t.open||e.preventDefault(),t.onOpenToggle());})),onKeyDown:composeEventHandlers(e.onKeyDown,(e=>{[" ","Enter","ArrowDown"].includes(e.key)&&(e.preventDefault(),t.onOpenChange(!0));}))}))):null}));const m=/*#__PURE__*/React.createContext(!1);const DropdownMenuContent=/*#__PURE__*/React.forwardRef(((e,r)=>{const n=i("DropdownMenuContent"),t={...e,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)"}};return React.createElement(m.Provider,{value:!0},n.isRootMenu?/*#__PURE__*/React.createElement(s,_extends({},t,{ref:r})):/*#__PURE__*/React.createElement(Content$1,_extends({},t,{ref:r})))}));const s=/*#__PURE__*/React.forwardRef(((e,r)=>{const{portalled:n=!0,...t}=e,a=i("DropdownMenuContent"),p=React.useRef(!1);return a.isRootMenu?/*#__PURE__*/React.createElement(Content$1,_extends({id:a.contentId,"aria-labelledby":a.triggerId},t,{ref:r,portalled:n,onCloseAutoFocus:o=>{var r,n;(null===(r=e.onCloseAutoFocus)||void 0===r||r.call(e,o),o.defaultPrevented)||(p.current||null===(n=a.triggerRef.current)||void 0===n||n.focus(),o.preventDefault());p.current=!1;},onInteractOutside:o=>{var r,n;if(null===(r=e.onInteractOutside)||void 0===r||r.call(e,o),!o.defaultPrevented){const e=o.detail.originalEvent,r=0===e.button&&!0===e.ctrlKey,n=2===e.button||r;a.modal&&!n||(p.current=!0);}const t=o.target;(null===(n=a.triggerRef.current)||void 0===n?void 0:n.contains(t))&&o.preventDefault();}})):null}));const DropdownMenuLabel=/*#__PURE__*/React.forwardRef(((e,r)=>/*#__PURE__*/React.createElement(Label$1,_extends({},e,{ref:r}))));const DropdownMenuItem=/*#__PURE__*/React.forwardRef(((e,r)=>/*#__PURE__*/React.createElement(Item$1,_extends({},e,{ref:r}))));const DropdownMenuTriggerItem=/*#__PURE__*/React.forwardRef(((e,r)=>/*#__PURE__*/React.createElement(SubTrigger,_extends({},e,{ref:r}))));const DropdownMenuCheckboxItem=/*#__PURE__*/React.forwardRef(((e,r)=>/*#__PURE__*/React.createElement(CheckboxItem$1,_extends({},e,{ref:r}))));const DropdownMenuRadioGroup=/*#__PURE__*/React.forwardRef(((e,r)=>/*#__PURE__*/React.createElement(RadioGroup$1,_extends({},e,{ref:r}))));const DropdownMenuRadioItem=/*#__PURE__*/React.forwardRef(((e,r)=>/*#__PURE__*/React.createElement(RadioItem$1,_extends({},e,{ref:r}))));const DropdownMenuItemIndicator=/*#__PURE__*/React.forwardRef(((e,r)=>/*#__PURE__*/React.createElement(ItemIndicator$1,_extends({},e,{ref:r}))));const DropdownMenuArrow=/*#__PURE__*/React.forwardRef(((e,r)=>/*#__PURE__*/React.createElement(Arrow$1,_extends({},e,{ref:r}))));const Root=DropdownMenu;const Trigger=DropdownMenuTrigger;const Content=DropdownMenuContent;const Label=DropdownMenuLabel;const Item=DropdownMenuItem;const TriggerItem=DropdownMenuTriggerItem;const CheckboxItem=DropdownMenuCheckboxItem;const RadioGroup=DropdownMenuRadioGroup;const RadioItem=DropdownMenuRadioItem;const ItemIndicator=DropdownMenuItemIndicator;const Arrow=DropdownMenuArrow;

export { Arrow, CheckboxItem, Content, DropdownMenu, DropdownMenuArrow, DropdownMenuCheckboxItem, DropdownMenuContent, DropdownMenuItem, DropdownMenuItemIndicator, DropdownMenuLabel, DropdownMenuRadioGroup, DropdownMenuRadioItem, DropdownMenuTrigger, DropdownMenuTriggerItem, Item, ItemIndicator, Label, RadioGroup, RadioItem, Root, Trigger, TriggerItem };
