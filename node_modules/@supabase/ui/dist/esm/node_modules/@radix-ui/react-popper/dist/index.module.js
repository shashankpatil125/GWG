import { Root as Root$1 } from '../../react-arrow/dist/index.module.js';
import { Primitive } from '../../react-primitive/dist/index.module.js';
import { useSize } from '../../react-use-size/dist/index.module.js';
import { useRect } from '../../react-use-rect/dist/index.module.js';
import { createContext } from '../../react-context/dist/index.module.js';
import { useComposedRefs } from '../../react-compose-refs/dist/index.module.js';
import { getPlacementData } from '../../popper/dist/index.module.js';
import * as React from 'react';
import _extends from '../../../@babel/runtime/helpers/esm/extends.js';

const[p,l]=createContext("Popper");const Popper=({children:e})=>{const[r,o]=React.useState(null);return React.createElement(p,{anchor:r,onAnchorChange:o},e)};const PopperAnchor=/*#__PURE__*/React.forwardRef(((e,o)=>{const{virtualRef:t,...n}=e,a=l("PopperAnchor"),p=React.useRef(null),f=useComposedRefs(o,p);return React.useEffect((()=>{a.onAnchorChange((null==t?void 0:t.current)||p.current);})),t?null:/*#__PURE__*/React.createElement(Primitive.div,_extends({},n,{ref:f}))}));const[f,d]=createContext("PopperContent");const PopperContent=/*#__PURE__*/React.forwardRef(((e,n)=>{const{side:p="bottom",sideOffset:d,align:u="center",alignOffset:m,collisionTolerance:w,avoidCollisions:h=!0,...x}=e,v=l("PopperContent"),[A,g]=React.useState(),E=useRect(v.anchor),[y,C]=React.useState(null),P=useSize(y),[S,R]=React.useState(null),O=useSize(S),b=useComposedRefs(n,(e=>C(e))),z=function(){const[e,r]=React.useState(void 0);return React.useEffect((()=>{let e;function o(){r({width:window.innerWidth,height:window.innerHeight});}function t(){window.clearTimeout(e),e=window.setTimeout(o,100);}return o(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),[]),e}(),T=z?DOMRect.fromRect({...z,x:0,y:0}):void 0,{popperStyles:k,arrowStyles:L,placedSide:B,placedAlign:D}=getPlacementData({anchorRect:E,popperSize:P,arrowSize:O,arrowOffset:A,side:p,sideOffset:d,align:u,alignOffset:m,shouldAvoidCollisions:h,collisionBoundariesRect:T,collisionTolerance:w}),H=void 0!==B;return React.createElement("div",{style:k,"data-radix-popper-content-wrapper":""},/*#__PURE__*/React.createElement(f,{arrowStyles:L,onArrowChange:R,onArrowOffsetChange:g},/*#__PURE__*/React.createElement(Primitive.div,_extends({"data-side":B,"data-align":D},x,{style:{...x.style,animation:H?void 0:"none"},ref:b}))))}));const PopperArrow=/*#__PURE__*/React.forwardRef((function(r,o){const{offset:t,...n}=r,i=d("PopperArrow"),{onArrowOffsetChange:a}=i;return React.useEffect((()=>a(t)),[a,t]),/*#__PURE__*/React.createElement("span",{style:{...i.arrowStyles,pointerEvents:"none"}},/*#__PURE__*/React.createElement("span",{ref:i.onArrowChange,style:{display:"inline-block",verticalAlign:"top",pointerEvents:"auto"}},/*#__PURE__*/React.createElement(Root$1,_extends({},n,{ref:o,style:{...n.style,display:"block"}}))))}));const Root=Popper;const Anchor=PopperAnchor;const Content=PopperContent;const Arrow=PopperArrow;

export { Anchor, Arrow, Content, Popper, PopperAnchor, PopperArrow, PopperContent, Root };
