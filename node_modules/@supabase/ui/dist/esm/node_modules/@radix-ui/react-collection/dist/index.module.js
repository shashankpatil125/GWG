import { Slot } from '../../react-slot/dist/index.module.js';
import { useComposedRefs } from '../../react-compose-refs/dist/index.module.js';
import React__default from 'react';

function createCollection(){const n=/*#__PURE__*/React__default.createContext({}),o=e=>{const{children:r}=e,o=React__default.useRef(null),c=React__default.useRef(new Map).current;return React__default.createElement(n.Provider,{value:React__default.useMemo((()=>({itemMap:c,collectionRef:o})),[c])},r)},c=/*#__PURE__*/React__default.forwardRef(((o,c)=>{const{children:f}=o,l=React__default.useContext(n),u=useComposedRefs(c,l.collectionRef);return React__default.createElement(Slot,{ref:u},f)})),f="data-radix-collection-item",l=/*#__PURE__*/React__default.forwardRef(((o,c)=>{const{children:l,...u}=o,i=React__default.useRef(null),a=useComposedRefs(c,i),s=React__default.useContext(n);return React__default.useEffect((()=>(s.itemMap.set(i,{ref:i,...u}),()=>{s.itemMap.delete(i);}))),/*#__PURE__*/React__default.createElement(Slot,{[f]:"",ref:a},l)}));return [o,c,l,function(){const e=React__default.useContext(n);return {getItems(){const r=Array.from(e.collectionRef.current.querySelectorAll(`[${f}]`));return Array.from(e.itemMap.values()).sort(((e,t)=>r.indexOf(e.ref.current)-r.indexOf(t.ref.current)))}}}]}

export { createCollection };
